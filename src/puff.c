#pragma bank 255

#include <stdint.h>
#include <gbdk/platform.h>
#include <gbdk/metasprites.h>
#include "TilesInfo.h"
#include "MetaSpriteInfo.h"

BANKREF(puff)

// CGB and SMS/GG palettes (should be different, but ok for the test
static const palette_color_t puff_palettes[] = {
	RGB8(254,254,254), RGB8(254, 80, 0), RGB8(254, 72, 16), RGB8(0, 0, 0)
};

// empty tiles just to initialize VRAM with something
static const uint8_t puff_tiles[] = {
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

// metasprite of 2x1 8x16 px hardware sprites
const metasprite_t puff_metasprite[] = {
	METASPR_ITEM(  -2, -2,  0, S_PALETTE), 
	METASPR_ITEM(  0,  8,  2, S_PALETTE), 
	//METASPR_ITEM(  0,  8,  4, S_PALETTE),
	METASPR_TERM
};

// only one animation, because we stream tile data instead
const metasprite_t* const puff_metasprites[1] = {
	puff_metasprite
};

// puff sprite descriptor structure
const struct MetaSpriteInfo puff = {
	.width        = 12,                // width
	.height       = 12,                 // height
	.num_tiles    = 4,                 // num tiles
	.data         = puff_tiles,      // tiles
	.num_palettes = 1,                 // num palettes
	.palettes     = puff_palettes,   // CGB palette
	.num_sprites  = 1,                 // num sprites
	.metasprites  = puff_metasprites, // metasprites
};
